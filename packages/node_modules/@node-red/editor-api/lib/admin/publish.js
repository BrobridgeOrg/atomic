var runtimeAPI;
var apiUtils = require("../util");
var child_process = require('child_process');

module.exports = {
    init: function(_runtimeAPI) {
        runtimeAPI = _runtimeAPI;
    },
    post: function(req,res) {

		var publishCmd = process.env.ATOMIC_PUBLISH_COMMAND;

		if (!publishCmd) {
			return res.status(204).end();
		}

		// Execute command
		var publish = child_process.exec(publishCmd, function(err, stdout, stderr) {

			if (err) {
				return apiUtils.rejectHandler(req, res, err);
			}

			res.status(204).end();
		});
    }
}
